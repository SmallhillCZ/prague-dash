"use strict";(self.webpackChunkprague_dash=self.webpackChunkprague_dash||[]).push([[1137],{1137:(U,p,s)=>{s.r(p),s.d(p,{CardSettingsModule:()=>J});var m=s(8583),g=s(6270),u=s(8239),f=s(4762),C=s(3728),h=s(9794),t=s(639),i=s(3083),_=s(4379);let T=(()=>{class e{constructor(n,r,a){this.componentFactoryResolver=n,this.viewContainerRef=r,this.cards=a,this.change=new t.vpe}ngOnInit(){}ngOnChanges(){this.renderCard(this.card)}renderCard(n){var r;const a=this.cards.find(l=>l.type===n.type);if(!a||!a.settingsComponent)return;this.viewContainerRef.clear(),null===(r=this.changeSubscription)||void 0===r||r.unsubscribe();const d=this.componentFactoryResolver.resolveComponentFactory(a.settingsComponent),Z=this.viewContainerRef.createComponent(d);Z.instance.card=n,this.changeSubscription=Z.instance.change.subscribe(l=>this.change.emit(l))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t._Vd),t.Y36(t.s_b),t.Y36(h.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-card-custom-settings"]],inputs:{card:"card"},outputs:{change:"change"},features:[t.TTD],decls:0,vars:0,template:function(n,r){},styles:[""]}),e})();var v=s(665);function S(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-card-custom-settings",5),t.NdJ("change",function(a){return t.CHM(n),t.oxw(2).saveCustom(a)}),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("card",n.card)}}function y(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"ion-list-header"),t.TgZ(2,"ion-label"),t.TgZ(3,"h1"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.YNc(5,S,1,1,"app-card-custom-settings",4),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.Oqu(n.cardType.title.cs),t.xp6(1),t.Q6J("ngIf",n.card&&n.cardType&&n.cardType.settingsComponent)}}function A(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item-group"),t.TgZ(1,"ion-item"),t.TgZ(2,"ion-label"),t._uU(3,"Barva"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().card.color=a})("ngModelChange",function(){return t.CHM(n),t.oxw().save()}),t.TgZ(5,"ion-select-option",7),t._uU(6,"B\xedl\xe1"),t.qZA(),t.TgZ(7,"ion-select-option",8),t._uU(8,"\u010cern\xe1"),t.qZA(),t.TgZ(9,"ion-select-option",9),t._uU(10,"R\u016f\u017eov\xe1"),t.qZA(),t.TgZ(11,"ion-select-option",10),t._uU(12,"Modr\xe1"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.card.color)}}function x(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return a.deleteCard(a.card.id)}),t._uU(2,"Smazat kartu"),t.qZA(),t.qZA()}}let c=class{constructor(o,n,r,a){this.route=o,this.navController=n,this.dashboardService=r,this.cards=a}ngOnInit(){}ionViewWillEnter(){this.route.params.pipe((0,C.t)(this)).subscribe(o=>this.loadCard(o.id))}loadCard(o){var n;this.card=null===(n=this.dashboardService.dashboard.value)||void 0===n?void 0:n.cards.find(r=>r.id===o),this.cardType=this.cards.find(r=>{var a;return r.type===(null===(a=this.card)||void 0===a?void 0:a.type)})}deleteCard(o){var n=this;return(0,u.Z)(function*(){yield n.dashboardService.removeCard(o),n.navController.navigateRoot("/")})()}save(){var o=this;return(0,u.Z)(function*(){!o.card||o.dashboardService.updateCard(o.card)})()}saveCustom(o){var n=this;return(0,u.Z)(function*(){!n.card||(n.card.definition=o,n.save())})()}};c.\u0275fac=function(o){return new(o||c)(t.Y36(g.gz),t.Y36(i.SH),t.Y36(_.s),t.Y36(h.g))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-card-settings"]],decls:18,vars:3,consts:[["slot","start"],["defaultHref","/"],[4,"ngIf"],["class","actions ion-padding",4,"ngIf"],[3,"card","change",4,"ngIf"],[3,"card","change"],[3,"ngModel","ngModelChange"],["value","white"],["value","black"],["value","pink"],["value","blue"],[1,"actions","ion-padding"],["color","danger",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Nastaven\xed karty"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"ion-content"),t.YNc(7,y,6,2,"ng-container",2),t.TgZ(8,"ion-list-header"),t.TgZ(9,"ion-label"),t.TgZ(10,"h1"),t._uU(11,"Obecn\xe1 nastaven\xed"),t.qZA(),t.qZA(),t.qZA(),t.YNc(12,A,13,1,"ion-item-group",2),t.TgZ(13,"ion-list-header"),t.TgZ(14,"ion-label"),t.TgZ(15,"h1"),t._uU(16,"Smazat kartu"),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,x,3,0,"div",3),t.qZA()),2&o&&(t.xp6(7),t.Q6J("ngIf",n.card&&n.cardType&&n.cardType.settingsComponent),t.xp6(5),t.Q6J("ngIf",n.card),t.xp6(5),t.Q6J("ngIf",n.card))},directives:[i.Gu,i.sr,i.Sm,i.oU,i.cs,i.wd,i.W2,m.O5,i.yh,i.Q$,T,i.Ub,i.Ie,i.t9,i.QI,v.JJ,v.On,i.n0,i.YG],styles:["ion-list-header[_ngcontent-%COMP%]{margin-top:2em}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}"]}),c=(0,f.gn)([(0,C.c)()],c);const M=[{path:"",component:c}];let b=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(M)],g.Bz]}),e})();var q=s(4466),E=s(1528);let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,b,q.m,E.m]]}),e})()}}]);